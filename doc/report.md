### 实验报告——高级程序设计 Project1

##### 201220087 郭百川

___

#### 实验目的

实现一个塔防游戏

#### 已实现功能

一个沿路径移动的圆形敌人，血量归零后可以被消灭，可以对防御塔造成伤害，到达目的地后会对玩家造成伤害

一个固定的方形防御塔，血量归零后可以被消灭，可选择一个方向放置，对其攻击范围内的所有敌人造成伤害

多条路径，敌人可沿所属的路径移动

通过 wasd 键选择防御塔的放置朝向，鼠标左键点击放置防御塔

每隔 5s 在每条路径生成一次敌人

简易 GUI 界面，可显示地图、防御塔、敌人、防御塔和敌人的血量、玩家血量

玩家血量归零后，弹出 Game Over 消息窗口，关闭窗口后结束游戏

#### 预留的接口

地图路径的初始化目前在代码中写死，但可以便捷地改为从文件中读取，便于实现多关卡

圆形敌人和方形防御塔的代码设计利用了继承机制，便于派生其他类型的敌人和防御塔

#### 代码架构

Game类：包含游戏所有主要参数，控制游戏状态的更新和人机交互

GameObject类：为一抽象类，一切游戏实体（敌人、防御塔）的公共父类，不同类的游戏实体间的交互在此层级实现

Friendly类：为一抽象类，防御塔的公共父类

Enemy类：为一抽象类，敌人的公共父类

Cell类：记录了地图中一个格子的状态

GameMap类：包含一个 Cell 二位数组，作为游戏所有格子的总和

mainWindow类：包含 Qt 框架，可以定时更新、绘制界面、接收用户输入